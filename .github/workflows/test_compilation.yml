name: 'Test compilation'

on:
  pull_request:
    branches: ['main', 'dev']

jobs:
  setup_pp:
    runs-on: 'ubuntu-latest'
    steps:
      - name: Setup CPP
        uses: aminya/setup-cpp@v0.36.1
        with:
          cpp-version: "latest"
      - name: Install clang-format
        run: sudo apt-get install -y clang-format
      - name: test_code_style
        runs-on: 'ubuntu-latest'
        steps:
          - uses: 'actions/checkout@v3'
          - name: 'Check code style'
            run: 'bash output/check_format.sh'
            timeout-minutes: 1

  test_compilation:
    runs-on: ubuntu-latest
    container:
      image: epitechcontent/epitest-docker:latest
    steps:
      - uses: 'actions/checkout@v3'
      - name: 'Check compilation'
        run: 'bash output/compile.sh'
        timeout-minutes: 5
